!function(Q){var B={};function F(I){if(B[I])return B[I].exports;var n=B[I]={i:I,l:!1,exports:{}};return Q[I].call(n.exports,n,n.exports,F),n.l=!0,n.exports}F.m=Q,F.c=B,F.d=function(Q,B,I){F.o(Q,B)||Object.defineProperty(Q,B,{enumerable:!0,get:I})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,B){if(1&B&&(Q=F(Q)),8&B)return Q;if(4&B&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var I=Object.create(null);if(F.r(I),Object.defineProperty(I,"default",{enumerable:!0,value:Q}),2&B&&"string"!=typeof Q)for(var n in Q)F.d(I,n,function(B){return Q[B]}.bind(null,n));return I},F.n=function(Q){var B=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(B,"a",B),B},F.o=function(Q,B){return Object.prototype.hasOwnProperty.call(Q,B)},F.p="",F(F.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/react-utils.js\nfunction isClass(func) {\n  // a hack way to check weather it is class or not\n  return typeof func === 'function' && /^class\\s/.test(Function.prototype.toString.call(func));\n}\n\nfunction isFunc(func) {\n  return typeof func === 'function' && !isClass(func);\n}\n\nfunction isEvent(name) {\n  return name.substring(0, 2) === 'on' ? true : false;\n}\n\nfunction isClassName(name) {\n  return name === 'className';\n}\n\n\n// CONCATENATED MODULE: ./src/react.js\n\nlet rootDOMElement, rootReactElement;\nconst REACT_CLASS = 'REACT_CLASS';\nlet classCounter = 0;\nconst classMap = {};\n\nclass Vnode {\n  constructor(type, props, key, ref) {\n    this.type = type;\n    this.props = props;\n    this.key = key;\n    this.ref = ref;\n  }\n\n}\n\nclass Component {\n  constructor(props) {\n    this.props = props;\n    this.state = this.state || {};\n    this.nextState = null;\n  }\n\n  setState(partialState) {// TODO\n  }\n\n  render() {// TODO\n  }\n\n} // use createElement() create Vnode, extract info from params to Vnode\n\n\nfunction createElement(type, config, ...children) {\n  let props = {},\n      key = null,\n      ref = null;\n  props.children = children; //children is always array\n  // parse config\n\n  if (config != null) {\n    // NOTE: undefined == null, return true, so check both undefined and null\n    key = config.key === undefined ? null : '' + config.key; // convert key to string\n\n    ref = config.ref === undefined ? null : config.ref; // then parse config to props\n\n    for (let propName in config) {\n      // no key or ref in props\n      if (propName === 'key' || propName === 'ref') continue;\n\n      if (config.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    }\n  }\n\n  return new Vnode(type, props, key, ref);\n}\n/* NOTE: replace with virtual node*/\n// function createElement(el, props, ...children) {\n//     return anElement(el, props, children);\n// }\n\n\nfunction anElement(element, props, children) {\n  if (isClass(element)) {\n    return handleClass(element, props, children);\n  } else if (isFunc(element)) {\n    return element(props);\n  } else {\n    return handleDOMNode(element, props, children);\n  }\n}\n\nfunction handleClass(clazz, props, children) {\n  classCounter++;\n\n  if (classMap[classCounter]) {\n    return classMap[classCounter];\n  }\n\n  const reactElem = new clazz(props);\n  reactElem.children = children;\n  reactElem.type = REACT_CLASS;\n  classMap[classCounter] = reactElem; // NOTE: return the obj instead of calling render() here\n\n  return reactElem;\n}\n\nfunction handleDOMNode(element, props, children) {\n  const anElement = document.createElement(element);\n\n  if (children !== null) {\n    children.map(c => {\n      appendChild(anElement, c);\n    });\n  } // add event listeners or attributes from props\n\n\n  for (let propName in props) {\n    appendProp(anElement, propName, props[propName]);\n  }\n\n  return anElement;\n}\n\nfunction appendChild(element, child) {\n  if (child.type === 'REACT_CLASS') {\n    appendChild(element, child.render());\n  } else if (Array.isArray(child)) {\n    child.map(ch => {\n      element.appendChild(ch);\n    });\n  } else if (typeof child === 'object') {\n    element.appendChild(child);\n  } else {\n    element.innerHTML += child;\n  }\n}\n\nfunction appendProp(element, propName, propVal) {\n  if (isEvent(propName)) {\n    element.addEventListener(propName.substring(2).toLowerCase(), propVal);\n  } else if (isClassName(propName)) {\n    propName = 'class';\n    element.setAttribute(propName, propVal);\n  } else {\n    element.setAttribute(propName, propVal);\n  }\n} // class Component {\n//     constructor(props) {\n//         this.props = props;\n//     }\n//     setState (state) {\n//         this.state = Object.assign({}, this.state, state);\n//         reRender();\n//     }\n// }\n\n\nfunction reRender() {\n  // delete old dom tree\n  while (rootDOMElement.hasChildNodes()) {\n    rootDOMElement.removeChild(rootDOMElement.lastChild);\n  } // render again\n\n\n  classCounter = 1; // skip the root\n\n  ReactDOM.render(rootReactElement, rootDOMElement);\n}\n\n/* harmony default export */ var react = ({\n  createElement,\n  Component\n});\n// CONCATENATED MODULE: ./src/reactDOM.js\n// const REACT_CLASS = 'REACT_CLASS';\n// TODO: refactor for Component wrapper\nfunction render(Vnode, container) {\n  // NOTE: 2 kinds of Vnode\n  if (!Vnode) return;\n  let {\n    type,\n    props\n  } = Vnode;\n  if (!type) return;\n  let {\n    children\n  } = props; // children is always an array, even []\n\n  const VnodeType = typeof type;\n  let domNode;\n\n  if (VnodeType === 'function') {\n    const VnodeRoot = renderComponent(Vnode);\n    type = VnodeRoot.type;\n    props = VnodeRoot.props;\n    children = props.children;\n    domNode = document.createElement(type);\n  } else if (VnodeType === 'string') {\n    domNode = document.createElement(type);\n  }\n\n  for (let i = 0; i < children.length; i++) {\n    mountChildren(children[i], domNode); // NOTE: recusion!\n  }\n\n  mapProps(domNode, props);\n  container.appendChild(domNode);\n}\n\nfunction renderComponent(VnodeWrapper) {\n  //\n  const ComponentClass = VnodeWrapper.type;\n  const {\n    props\n  } = VnodeWrapper;\n  const instance = new ComponentClass(props);\n  const unwrappedVnode = instance.render(); // generate Vnodes(like a tree) in class's render()\n\n  instance.Vnode = unwrappedVnode; // store Vnode into the instance for recording\n\n  return unwrappedVnode;\n}\n\nfunction mountChildren(child, domNode) {\n  // check children's type\n  if (typeof child === 'string') {\n    domNode.innerHTML += child;\n    return;\n  }\n\n  render(child, domNode);\n}\n\nfunction mapProps(domNode, props) {\n  for (let propsName in props) {\n    if (propsName === 'children') continue;\n\n    if (propsName === 'style') {\n      let style = props['style'];\n      Object.keys(style).forEach(styleName => {\n        domNode.style[styleName] = style[styleName];\n      });\n      continue;\n    }\n\n    domNode[propsName] = props[propsName];\n  }\n} // function render(el, domEl) {\n//     let rootDOMElement = domEl;\n//     let rootReactElement = el;\n//     let currentDOM;\n//     if (rootReactElement.type === REACT_CLASS) {\n//         currentDOM = rootReactElement.render();\n//     }\n//     else {\n//         currentDOM = rootReactElement;\n//     }\n//     domEl.appendChild(currentDOM);\n// }\n\n\n/* harmony default export */ var reactDOM = ({\n  render\n});\n// CONCATENATED MODULE: ./app/app.jsx\n\n // const MyCoolJSXQuoteComponent = ({quote, author}) => {\n//   return (\n//     <div className=\"quote-container\">\n//       <h4 className=\"quote\">\"{quote}\"</h4>\n//       <div className=\"author\">- {author}</div>\n//     </div>\n//   );\n// };\n//\n//\n// ReactDOM.render(\n//   <MyCoolJSXQuoteComponent\n//     quote=\"The only source of knowledge is experience.\"\n//     author=\"Albert Einstein\"/>,\n//   document.getElementById('root'));\n// TEST 1\n// const helloWorld = <div>hello sb!</div>;\n//\n// ReactDOM.render(helloWorld, document.getElementById('root'));\n// TEST 2\n// const helloWorld2 = <div style={{background: 'red'}}>\n//                         hello sb!\n//                         <div>\n//                             hello tony!\n//                         </div>\n//                     </div>;\n//\n// ReactDOM.render(helloWorld2, document.getElementById('root'));\n// TEST 3\n// class Hello extends React.Component{\n//     render() {\n//         return (\n//             <div>\n//                 Hello!!!\n//                 <span>\n//                     aaaaaa\n//                     <span>\n//                         vvvvvvvvvv\n//                     </span>\n//                 </span>\n//             </div>\n//         )\n//     }\n// }\n//\n// const helloWorld = (\n//     <div>\n//         ssssss\n//         <Hello/>\n//     </div>\n//     );\n// ReactDOM.render(helloWorld, document.getElementById('root'));\n// TEST 4\n\nclass app_Hello extends react.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return react.createElement(\"div\", null, \"Hello!!!\", this.props.children[0]);\n  }\n\n}\n\nconst helloWorld = react.createElement(\"div\", null, \"ssssss\", react.createElement(app_Hello, null, react.createElement(\"div\", null, \"Yang\")));\nreactDOM.render(helloWorld, document.getElementById('root'));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVhY3QtdXRpbHMuanM/MDAwNiIsIndlYnBhY2s6Ly8vLi9zcmMvcmVhY3QuanM/Nzc3ZCIsIndlYnBhY2s6Ly8vLi9zcmMvcmVhY3RET00uanM/NDY5NyIsIndlYnBhY2s6Ly8vLi9hcHAvYXBwLmpzeD84YjRmIl0sIm5hbWVzIjpbImlzQ2xhc3MiLCJmdW5jIiwidGVzdCIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiaXNGdW5jIiwiaXNFdmVudCIsIm5hbWUiLCJzdWJzdHJpbmciLCJpc0NsYXNzTmFtZSIsInJvb3RET01FbGVtZW50Iiwicm9vdFJlYWN0RWxlbWVudCIsIlJFQUNUX0NMQVNTIiwiY2xhc3NDb3VudGVyIiwiY2xhc3NNYXAiLCJWbm9kZSIsImNvbnN0cnVjdG9yIiwidHlwZSIsInByb3BzIiwia2V5IiwicmVmIiwiQ29tcG9uZW50Iiwic3RhdGUiLCJuZXh0U3RhdGUiLCJzZXRTdGF0ZSIsInBhcnRpYWxTdGF0ZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJjb25maWciLCJjaGlsZHJlbiIsInVuZGVmaW5lZCIsInByb3BOYW1lIiwiaGFzT3duUHJvcGVydHkiLCJhbkVsZW1lbnQiLCJlbGVtZW50IiwiaGFuZGxlQ2xhc3MiLCJoYW5kbGVET01Ob2RlIiwiY2xhenoiLCJyZWFjdEVsZW0iLCJkb2N1bWVudCIsIm1hcCIsImMiLCJhcHBlbmRDaGlsZCIsImFwcGVuZFByb3AiLCJjaGlsZCIsIkFycmF5IiwiaXNBcnJheSIsImNoIiwiaW5uZXJIVE1MIiwicHJvcFZhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b0xvd2VyQ2FzZSIsInNldEF0dHJpYnV0ZSIsInJlUmVuZGVyIiwiaGFzQ2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwiUmVhY3RET00iLCJjb250YWluZXIiLCJWbm9kZVR5cGUiLCJkb21Ob2RlIiwiVm5vZGVSb290IiwicmVuZGVyQ29tcG9uZW50IiwiaSIsImxlbmd0aCIsIm1vdW50Q2hpbGRyZW4iLCJtYXBQcm9wcyIsIlZub2RlV3JhcHBlciIsIkNvbXBvbmVudENsYXNzIiwiaW5zdGFuY2UiLCJ1bndyYXBwZWRWbm9kZSIsInByb3BzTmFtZSIsInN0eWxlIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJzdHlsZU5hbWUiLCJIZWxsbyIsIlJlYWN0IiwiaGVsbG9Xb3JsZCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxTQUFTQSxPQUFULENBQWlCQyxJQUFqQixFQUF1QjtBQUNuQjtBQUNBLFNBQU8sT0FBT0EsSUFBUCxLQUFnQixVQUFoQixJQUNBLFdBQVdDLElBQVgsQ0FBZ0JDLFFBQVEsQ0FBQ0MsU0FBVCxDQUFtQkMsUUFBbkIsQ0FBNEJDLElBQTVCLENBQWlDTCxJQUFqQyxDQUFoQixDQURQO0FBRUg7O0FBRUQsU0FBU00sTUFBVCxDQUFnQk4sSUFBaEIsRUFBc0I7QUFDbEIsU0FBTyxPQUFPQSxJQUFQLEtBQWdCLFVBQWhCLElBQ0EsQ0FBQ0QsT0FBTyxDQUFDQyxJQUFELENBRGY7QUFFSDs7QUFFRCxTQUFTTyxPQUFULENBQWlCQyxJQUFqQixFQUF1QjtBQUNuQixTQUFPQSxJQUFJLENBQUNDLFNBQUwsQ0FBZSxDQUFmLEVBQWtCLENBQWxCLE1BQXlCLElBQXpCLEdBQWdDLElBQWhDLEdBQXVDLEtBQTlDO0FBQ0g7O0FBRUQsU0FBU0MsV0FBVCxDQUFxQkYsSUFBckIsRUFBMkI7QUFDdkIsU0FBT0EsSUFBSSxLQUFLLFdBQWhCO0FBQ0g7Ozs7QUNqQkQ7QUFFQSxJQUFJRyxjQUFKLEVBQW9CQyxnQkFBcEI7QUFDQSxNQUFNQyxXQUFXLEdBQUcsYUFBcEI7QUFFQSxJQUFJQyxZQUFZLEdBQUcsQ0FBbkI7QUFDQSxNQUFNQyxRQUFRLEdBQUcsRUFBakI7O0FBRUEsTUFBTUMsS0FBTixDQUFZO0FBQ1JDLGFBQVcsQ0FBQ0MsSUFBRCxFQUFPQyxLQUFQLEVBQWNDLEdBQWQsRUFBbUJDLEdBQW5CLEVB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQSxNQUFNbUQsU0FBTixTQUFvQkMsS0FBSyxDQUFDekQsU0FBMUIsQ0FBbUM7QUFDL0JMLGFBQVcsQ0FBQ0UsS0FBRCxFQUFRO0FBQ2YsVUFBTUEsS0FBTjtBQUNBLFNBQUtJLEtBQUwsR0FBYSxFQUFiO0FBQ0g7O0FBRURJLFFBQU0sR0FBRztBQUNMLFdBQ0ksNkNBR0ssS0FBS1IsS0FBTCxDQUFXVyxRQUFYLENBQW9CLENBQXBCLENBSEwsQ0FESjtBQU9IOztBQWQ4Qjs7QUFpQm5DLE1BQU1rRCxVQUFVLEdBQ1osMkNBRUksb0JBQUMsU0FBRCxRQUNJLHdDQURKLENBRkosQ0FESjtBQVFBdEIsUUFBUSxDQUFDL0IsTUFBVCxDQUFnQnFELFVBQWhCLEVBQTRCeEMsUUFBUSxDQUFDeUMsY0FBVCxDQUF3QixNQUF4QixDQUE1QiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNDbGFzcyhmdW5jKSB7XG4gICAgLy8gYSBoYWNrIHdheSB0byBjaGVjayB3ZWF0aGVyIGl0IGlzIGNsYXNzIG9yIG5vdFxuICAgIHJldHVybiB0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAmJiAvXmNsYXNzXFxzLy50ZXN0KEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZ1bmMpKTtcbn1cblxuZnVuY3Rpb24gaXNGdW5jKGZ1bmMpIHtcbiAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbidcbiAgICAgICAgJiYgIWlzQ2xhc3MoZnVuYyk7XG59XG5cbmZ1bmN0aW9uIGlzRXZlbnQobmFtZSkge1xuICAgIHJldHVybiBuYW1lLnN1YnN0cmluZygwLCAyKSA9PT0gJ29uJyA/IHRydWUgOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNDbGFzc05hbWUobmFtZSkge1xuICAgIHJldHVybiBuYW1lID09PSAnY2xhc3NOYW1lJztcbn1cblxuZXhwb3J0IHtcbiAgICBpc0NsYXNzLFxuICAgIGlzRnVuYyxcbiAgICBpc0V2ZW50LFxuICAgIGlzQ2xhc3NOYW1lLFxufVxuIiwiaW1wb3J0IHsgaXNDbGFzcywgaXNGdW5jLCBpc0V2ZW50LCBpc0NsYXNzTmFtZX0gZnJvbSAnLi9yZWFjdC11dGlscy5qcyc7XG5cbmxldCByb290RE9NRWxlbWVudCwgcm9vdFJlYWN0RWxlbWVudDtcbmNvbnN0IFJFQUNUX0NMQVNTID0gJ1JFQUNUX0NMQVNTJztcblxubGV0IGNsYXNzQ291bnRlciA9IDA7XG5jb25zdCBjbGFzc01hcCA9IHt9O1xuXG5jbGFzcyBWbm9kZSB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgcHJvcHMsIGtleSwgcmVmKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMucmVmID0gcmVmO1xuICAgIH1cbn1cblxuY2xhc3MgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnN0YXRlIHx8IHt9XG5cbiAgICAgICAgdGhpcy5uZXh0U3RhdGUgPSBudWxsXG4gICAgfVxuXG4gICAgc2V0U3RhdGUocGFydGlhbFN0YXRlKSB7XG4gICAgICAgIC8vIFRPRE9cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIC8vIFRPRE9cbiAgICB9XG59XG5cbi8vIHVzZSBjcmVhdGVFbGVtZW50KCkgY3JlYXRlIFZub2RlLCBleHRyYWN0IGluZm8gZnJvbSBwYXJhbXMgdG8gVm5vZGVcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodHlwZSwgY29uZmlnLCAuLi5jaGlsZHJlbikge1xuICAgIGxldCBwcm9wcyA9IHt9LFxuICAgICAgICBrZXkgPSBudWxsLFxuICAgICAgICByZWYgPSBudWxsO1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47ICAvL2NoaWxkcmVuIGlzIGFsd2F5cyBhcnJheVxuXG4gICAgLy8gcGFyc2UgY29uZmlnXG4gICAgaWYgKGNvbmZpZyAhPSBudWxsKSB7ICAvLyBOT1RFOiB1bmRlZmluZWQgPT0gbnVsbCwgcmV0dXJuIHRydWUsIHNvIGNoZWNrIGJvdGggdW5kZWZpbmVkIGFuZCBudWxsXG4gICAgICAgIGtleSA9IGNvbmZpZy5rZXkgPT09IHVuZGVmaW5lZCA/IG51bGwgOiAnJyArIGNvbmZpZy5rZXk7IC8vIGNvbnZlcnQga2V5IHRvIHN0cmluZ1xuICAgICAgICByZWYgPSBjb25maWcucmVmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLnJlZjtcbiAgICAgICAgLy8gdGhlbiBwYXJzZSBjb25maWcgdG8gcHJvcHNcbiAgICAgICAgZm9yIChsZXQgcHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICAgICAgICAvLyBubyBrZXkgb3IgcmVmIGluIHByb3BzXG4gICAgICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdrZXknIHx8IHByb3BOYW1lID09PSAncmVmJylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBWbm9kZSh0eXBlLCBwcm9wcywga2V5LCByZWYpO1xufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vKiBOT1RFOiByZXBsYWNlIHdpdGggdmlydHVhbCBub2RlKi9cbi8vIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWwsIHByb3BzLCAuLi5jaGlsZHJlbikge1xuLy8gICAgIHJldHVybiBhbkVsZW1lbnQoZWwsIHByb3BzLCBjaGlsZHJlbik7XG4vLyB9XG5cbmZ1bmN0aW9uIGFuRWxlbWVudChlbGVtZW50LCBwcm9wcywgY2hpbGRyZW4pIHtcbiAgICBpZiAoaXNDbGFzcyhlbGVtZW50KSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlQ2xhc3MoZWxlbWVudCwgcHJvcHMsIGNoaWxkcmVuKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGdW5jKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50KHByb3BzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVET01Ob2RlKGVsZW1lbnQsIHByb3BzLCBjaGlsZHJlbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDbGFzcyhjbGF6eiwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgY2xhc3NDb3VudGVyICsrO1xuICAgIGlmKGNsYXNzTWFwW2NsYXNzQ291bnRlcl0pIHtcbiAgICAgICAgcmV0dXJuIGNsYXNzTWFwW2NsYXNzQ291bnRlcl07XG4gICAgfVxuXG4gICAgY29uc3QgcmVhY3RFbGVtID0gbmV3IGNsYXp6KHByb3BzKTtcbiAgICByZWFjdEVsZW0uY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICByZWFjdEVsZW0udHlwZSA9IFJFQUNUX0NMQVNTO1xuICAgIGNsYXNzTWFwW2NsYXNzQ291bnRlcl0gPSByZWFjdEVsZW07XG4gICAgLy8gTk9URTogcmV0dXJuIHRoZSBvYmogaW5zdGVhZCBvZiBjYWxsaW5nIHJlbmRlcigpIGhlcmVcbiAgICByZXR1cm4gcmVhY3RFbGVtO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVET01Ob2RlKGVsZW1lbnQsIHByb3BzLCBjaGlsZHJlbikge1xuICAgIGNvbnN0IGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICBpZiAoIGNoaWxkcmVuICE9PSBudWxsICkge1xuICAgICAgICBjaGlsZHJlbi5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgIGFwcGVuZENoaWxkKGFuRWxlbWVudCwgYyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJzIG9yIGF0dHJpYnV0ZXMgZnJvbSBwcm9wc1xuICAgIGZvciAobGV0IHByb3BOYW1lIGluIHByb3BzKSB7XG4gICAgICAgIGFwcGVuZFByb3AoYW5FbGVtZW50LCBwcm9wTmFtZSwgcHJvcHNbcHJvcE5hbWVdKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gYXBwZW5kQ2hpbGQoZWxlbWVudCwgY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ1JFQUNUX0NMQVNTJykge1xuICAgICAgICBhcHBlbmRDaGlsZChlbGVtZW50LCBjaGlsZC5yZW5kZXIoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYoQXJyYXkuaXNBcnJheShjaGlsZCkpIHtcbiAgICAgICAgY2hpbGQubWFwKGNoID0+IHtlbGVtZW50LmFwcGVuZENoaWxkKGNoKX0pO1xuICAgIH1cbiAgICBlbHNlIGlmKHR5cGVvZihjaGlsZCkgPT09ICdvYmplY3QnKXtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50LmlubmVySFRNTCArPSBjaGlsZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFwcGVuZFByb3AoZWxlbWVudCwgcHJvcE5hbWUsIHByb3BWYWwpIHtcbiAgICBpZiAoaXNFdmVudChwcm9wTmFtZSkpIHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHByb3BOYW1lLnN1YnN0cmluZygyKS50b0xvd2VyQ2FzZSgpLCBwcm9wVmFsKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNDbGFzc05hbWUocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BOYW1lID0gJ2NsYXNzJztcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcE5hbWUsIHByb3BWYWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcE5hbWUsIHByb3BWYWwpO1xuICAgIH1cbn1cblxuLy8gY2xhc3MgQ29tcG9uZW50IHtcbi8vICAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuLy8gICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4vLyAgICAgfVxuLy8gICAgIHNldFN0YXRlIChzdGF0ZSkge1xuLy8gICAgICAgICB0aGlzLnN0YXRlID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdGF0ZSwgc3RhdGUpO1xuLy8gICAgICAgICByZVJlbmRlcigpO1xuLy8gICAgIH1cbi8vIH1cblxuZnVuY3Rpb24gcmVSZW5kZXIoKSB7XG4gICAgLy8gZGVsZXRlIG9sZCBkb20gdHJlZVxuICAgIHdoaWxlKHJvb3RET01FbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICByb290RE9NRWxlbWVudC5yZW1vdmVDaGlsZChyb290RE9NRWxlbWVudC5sYXN0Q2hpbGQpO1xuICAgIH1cbiAgICAvLyByZW5kZXIgYWdhaW5cbiAgICBjbGFzc0NvdW50ZXIgPSAxOyAvLyBza2lwIHRoZSByb290XG4gICAgUmVhY3RET00ucmVuZGVyKHJvb3RSZWFjdEVsZW1lbnQsIHJvb3RET01FbGVtZW50KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNyZWF0ZUVsZW1lbnQsXG4gICAgQ29tcG9uZW50LFxufVxuIiwiLy8gY29uc3QgUkVBQ1RfQ0xBU1MgPSAnUkVBQ1RfQ0xBU1MnO1xuXG4vLyBUT0RPOiByZWZhY3RvciBmb3IgQ29tcG9uZW50IHdyYXBwZXJcblxuZnVuY3Rpb24gcmVuZGVyKFZub2RlLCBjb250YWluZXIpIHsgIC8vIE5PVEU6IDIga2luZHMgb2YgVm5vZGVcbiAgICBpZiAoIVZub2RlKSByZXR1cm47XG4gICAgbGV0IHsgdHlwZSwgcHJvcHMgfSA9IFZub2RlO1xuICAgIGlmICghdHlwZSkgcmV0dXJuO1xuICAgIGxldCB7IGNoaWxkcmVuIH0gPSBwcm9wczsgLy8gY2hpbGRyZW4gaXMgYWx3YXlzIGFuIGFycmF5LCBldmVuIFtdXG5cbiAgICBjb25zdCBWbm9kZVR5cGUgPSB0eXBlb2YgdHlwZTtcbiAgICBsZXQgZG9tTm9kZTtcblxuICAgIGlmKFZub2RlVHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBWbm9kZVJvb3QgPSByZW5kZXJDb21wb25lbnQoVm5vZGUpO1xuICAgICAgICB0eXBlID0gVm5vZGVSb290LnR5cGU7XG4gICAgICAgIHByb3BzID0gVm5vZGVSb290LnByb3BzO1xuICAgICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuO1xuICAgICAgICBkb21Ob2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZihWbm9kZVR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRvbU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgIH1cblxuICAgIGZvcihsZXQgaT0wOyBpPGNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgbW91bnRDaGlsZHJlbihjaGlsZHJlbltpXSwgZG9tTm9kZSk7ICAvLyBOT1RFOiByZWN1c2lvbiFcbiAgICB9XG4gICAgbWFwUHJvcHMoZG9tTm9kZSwgcHJvcHMpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRvbU5vZGUpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnQoVm5vZGVXcmFwcGVyKSB7ICAvL1xuICAgIGNvbnN0IENvbXBvbmVudENsYXNzID0gVm5vZGVXcmFwcGVyLnR5cGU7XG4gICAgY29uc3QgeyBwcm9wcyB9ID0gVm5vZGVXcmFwcGVyO1xuICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IENvbXBvbmVudENsYXNzKHByb3BzKTtcblxuICAgIGNvbnN0IHVud3JhcHBlZFZub2RlID0gaW5zdGFuY2UucmVuZGVyKCk7ICAvLyBnZW5lcmF0ZSBWbm9kZXMobGlrZSBhIHRyZWUpIGluIGNsYXNzJ3MgcmVuZGVyKClcblxuICAgIGluc3RhbmNlLlZub2RlID0gdW53cmFwcGVkVm5vZGU7IC8vIHN0b3JlIFZub2RlIGludG8gdGhlIGluc3RhbmNlIGZvciByZWNvcmRpbmdcbiAgICByZXR1cm4gdW53cmFwcGVkVm5vZGU7XG59XG5cbmZ1bmN0aW9uIG1vdW50Q2hpbGRyZW4oY2hpbGQsIGRvbU5vZGUpIHtcbiAgICAvLyBjaGVjayBjaGlsZHJlbidzIHR5cGVcbiAgICBpZih0eXBlb2YoY2hpbGQpID09PSAnc3RyaW5nJykge1xuICAgICAgICBkb21Ob2RlLmlubmVySFRNTCArPSBjaGlsZDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJlbmRlcihjaGlsZCwgZG9tTm9kZSk7XG59XG5cbmZ1bmN0aW9uIG1hcFByb3BzKGRvbU5vZGUsIHByb3BzKXtcbiAgICBmb3IgKGxldCBwcm9wc05hbWUgaW4gcHJvcHMpe1xuICAgICAgICBpZiAocHJvcHNOYW1lID09PSAnY2hpbGRyZW4nKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChwcm9wc05hbWUgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IHByb3BzWydzdHlsZSddXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaCgoc3R5bGVOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9tTm9kZS5zdHlsZVtzdHlsZU5hbWVdID0gc3R5bGVbc3R5bGVOYW1lXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBkb21Ob2RlW3Byb3BzTmFtZV0gPSBwcm9wc1twcm9wc05hbWVdO1xuICAgIH1cbn1cblxuXG5cblxuXG4vLyBmdW5jdGlvbiByZW5kZXIoZWwsIGRvbUVsKSB7XG4vLyAgICAgbGV0IHJvb3RET01FbGVtZW50ID0gZG9tRWw7XG4vLyAgICAgbGV0IHJvb3RSZWFjdEVsZW1lbnQgPSBlbDtcbi8vICAgICBsZXQgY3VycmVudERPTTtcbi8vICAgICBpZiAocm9vdFJlYWN0RWxlbWVudC50eXBlID09PSBSRUFDVF9DTEFTUykge1xuLy8gICAgICAgICBjdXJyZW50RE9NID0gcm9vdFJlYWN0RWxlbWVudC5yZW5kZXIoKTtcbi8vICAgICB9XG4vLyAgICAgZWxzZSB7XG4vLyAgICAgICAgIGN1cnJlbnRET00gPSByb290UmVhY3RFbGVtZW50O1xuLy8gICAgIH1cbi8vICAgICBkb21FbC5hcHBlbmRDaGlsZChjdXJyZW50RE9NKTtcbi8vIH1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHJlbmRlcixcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICcuLi9zcmMvcmVhY3QuanMnXG5pbXBvcnQgUmVhY3RET00gZnJvbSAnLi4vc3JjL3JlYWN0RE9NLmpzJ1xuXG4vLyBjb25zdCBNeUNvb2xKU1hRdW90ZUNvbXBvbmVudCA9ICh7cXVvdGUsIGF1dGhvcn0pID0+IHtcbi8vICAgcmV0dXJuIChcbi8vICAgICA8ZGl2IGNsYXNzTmFtZT1cInF1b3RlLWNvbnRhaW5lclwiPlxuLy8gICAgICAgPGg0IGNsYXNzTmFtZT1cInF1b3RlXCI+XCJ7cXVvdGV9XCI8L2g0PlxuLy8gICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdXRob3JcIj4tIHthdXRob3J9PC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICk7XG4vLyB9O1xuLy9cbi8vXG4vLyBSZWFjdERPTS5yZW5kZXIoXG4vLyAgIDxNeUNvb2xKU1hRdW90ZUNvbXBvbmVudFxuLy8gICAgIHF1b3RlPVwiVGhlIG9ubHkgc291cmNlIG9mIGtub3dsZWRnZSBpcyBleHBlcmllbmNlLlwiXG4vLyAgICAgYXV0aG9yPVwiQWxiZXJ0IEVpbnN0ZWluXCIvPixcbi8vICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8vIFRFU1QgMVxuLy8gY29uc3QgaGVsbG9Xb3JsZCA9IDxkaXY+aGVsbG8gc2IhPC9kaXY+O1xuLy9cbi8vIFJlYWN0RE9NLnJlbmRlcihoZWxsb1dvcmxkLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLy8gVEVTVCAyXG4vLyBjb25zdCBoZWxsb1dvcmxkMiA9IDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kOiAncmVkJ319PlxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgaGVsbG8gc2IhXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbGxvIHRvbnkhXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbi8vICAgICAgICAgICAgICAgICAgICAgPC9kaXY+O1xuLy9cbi8vIFJlYWN0RE9NLnJlbmRlcihoZWxsb1dvcmxkMiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8vIFRFU1QgM1xuLy8gY2xhc3MgSGVsbG8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4vLyAgICAgcmVuZGVyKCkge1xuLy8gICAgICAgICByZXR1cm4gKFxuLy8gICAgICAgICAgICAgPGRpdj5cbi8vICAgICAgICAgICAgICAgICBIZWxsbyEhIVxuLy8gICAgICAgICAgICAgICAgIDxzcGFuPlxuLy8gICAgICAgICAgICAgICAgICAgICBhYWFhYWFcbi8vICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB2dnZ2dnZ2dnZ2XG4vLyAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbi8vICAgICAgICAgICAgICAgICA8L3NwYW4+XG4vLyAgICAgICAgICAgICA8L2Rpdj5cbi8vICAgICAgICAgKVxuLy8gICAgIH1cbi8vIH1cbi8vXG4vLyBjb25zdCBoZWxsb1dvcmxkID0gKFxuLy8gICAgIDxkaXY+XG4vLyAgICAgICAgIHNzc3Nzc1xuLy8gICAgICAgICA8SGVsbG8vPlxuLy8gICAgIDwvZGl2PlxuLy8gICAgICk7XG4vLyBSZWFjdERPTS5yZW5kZXIoaGVsbG9Xb3JsZCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8vIFRFU1QgNFxuY2xhc3MgSGVsbG8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge307XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICBIZWxsbyEhIVxuICAgICAgICAgICAgICAgIHsvKiBUT0RPOiBob3cgdG8gYXV0b21hdGljYWxseSByZW5kZXIgYWxsIGVsZW1zIGluIGNoaWxkcmVuIGFycmF5ICovfVxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVuWzBdfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICB9XG59XG5cbmNvbnN0IGhlbGxvV29ybGQgPSAoXG4gICAgPGRpdj5cbiAgICAgICAgc3Nzc3NzXG4gICAgICAgIDxIZWxsbz5cbiAgICAgICAgICAgIDxkaXY+WWFuZzwvZGl2PlxuICAgICAgICA8L0hlbGxvPlxuICAgIDwvZGl2PlxuICAgICk7XG5SZWFjdERPTS5yZW5kZXIoaGVsbG9Xb3JsZCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);